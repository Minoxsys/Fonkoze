@using Web.Areas.OutpostManagement.Models.Contact

@model ContactsOverviewModel
           
@section page_title{
<br/>
<br />
}

@section title_bar{
<br/>
<br />
}

@section breadcrumbs{
   @Url.HomeLink("Outpost Administration") :  @(Html.ActionLink<OutpostController>(it => it.Overview(null, null, null), "Outposts", OutpostManagementAreaRegistration.DEFAULT_ROUTE)) > Contact Details
}

@section master_content{
    @if (!string.IsNullOrWhiteSpace(Model.Error))
    {
        <div class="error">
            @Model.Error
        </div>
    }
    <div class="page_header_buttons">
        @(Html.ActionLink<ContactController>(it => it.Create(Model.OutpostId), "Add new Contact", OutpostManagementAreaRegistration.DEFAULT_ROUTE))
    </div>
    
 <table id="Contacts">
        <thead>
            <tr>
                <th>
                </th>
                <th>
                     <label>Search:<input type="text" 
                                   id="contactsSearch" 
                                   name="contactsSearch" 
                                   maxlength="50" 
                                   style="width:200px; 
                                   height   :30px; 
                                   margin-left:0px" /> 
                       </label>
                </th>
            </tr>
        </thead>
    </table>

        <table id="Contacts">
        <thead>
            <tr>
                <th>
                    Contact Method
                </th>
                  <th>
                    Contact Detail
                </th>
                <th></th>
                 <th colspan="2" align="center">
                 Actions
                </th>
            </tr>
        </thead>
        <tbody>
            @{
                var itemNo = 0;
            }
            @foreach (ContactModel contact in Model.Items)
            {
                var _class = (itemNo++ % 2 == 0) ? "odd" : "even";
       
                <tr class="@_class">
                   <td>
                       @contact.ContactType;
                   </td>
                   <td>
                       @contact.ContactDetail
                   </td>
                   <td>
                       @Html.CheckBox("Main-Contact",contact.MainContact)                     
                   </td>
                   <td>
                            @{Html.BeginForm<ContactController>(m => m.Delete(contact.Id, contact.OutpostId), 
                                  FormMethod.Post, 
                                  new { @class = "delete-user-form" });}
                            @Html.Button("delete-user", "Delete", HtmlButtonType.Submit)
                            @{Html.EndForm();}
                     </td>
                </tr> 
            }
        </tbody>
    </table>
    <input type="checkbox" name="by-contact-type" value="Phone" id="byphone" /> 
}

@section master_actions{
    @{
        Html.RenderPartial("~/Views/Shared/_OutpostManagementActions.cshtml");
    }
}
@*                   //$.getJSON('@Url.Action("SetContactMainMethod", "Contact")?outpostiId=' + contact.OutpostId + ',contactId=' + contact.Id);*@

@section scripts{
    <script type="text/javascript">

        $(function () {
            $(".delete-user-form").submit(function () {
                return confirm('Are you sure that you want to delete this Contact?');
            });
        });


        $(function () {
            $('#Main-Contact').bind('change', function(event) {
                if ($(this).is(":checked")) {
                    alert(window.contact.Id);
                }
                else {
                    alert("fffff");
                }
            });
        });
        
    </script>
}

